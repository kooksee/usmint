# kchain
基于tendermint的区块链平台

## 编译

```
make build
```

## 关于chain以及node的系统结构
```
1. chain主要负责abci智能合约部分，不负责数据的美化，聚合
2. node层，保留用户原始的数据，按理说可以是分布式的，甚至是去中心化的，只需要node连接上chain就可以了，然后给该node开通写入权限，那么，该node
既可以自己使用，也可以对外提供服务，只不过，不能挖矿。node相当于轻量级别的chain
3. 在node层可以提供比较全面的接口给上层的app使用
4. node保留用户了用户的数据，以及缓存tx的作用
5. 区块链上的数据都是共享的，但是每一个node的数据都属于用户自己的数据
```


## 联盟链的auth

```
只有权限power为10的节点才具有操作其他节点的能力
1. 节点启动的权限，可以通过token的方式启动，可以通过配置文件的防止启动，在abci中校验，给节点同步数据的权限，读的权限
2. 数据的写入，需要对写入的节点的签名进行验证，防止攻击的时候胡乱写入数据，给节点写入权限，有写入权限的节点同时也配置挖矿的级别
3. 关于授权节点的加入，动态的添加验证节点，非验证节点不需要添加，只需要同步数据就可以，给节点投票的权限
4. 节点的写入权限关闭，这样让其他的节点能够快速接入测试环境，方便测试
```

## 联盟链的智能合约化

```
1. 添加验证节点，通过命令行添加，数据为其他节点的pubkey和power值
2. 数据的写入权限通过api控制，这样动态操作比较频繁以及方便
3. token通过配置文件，安全级别不是那么高
4. 添加节点的权限通过脚本控制，拥有权限的节点才能去进行数据的写入，智能合约把数据存放到特殊的位置
5.
```

## 关于tendermint的存储
```
1. tendermint的存储是可选的，以及是可以扩展的，可以是本地存储，也可以是远程的存储
2. 关于tendermint远程存储，所以可以把数据的存储抓门放到一台主机上面去，该主机可以使用大的存储
3. 可以让多个共识节点同时访问一个tx_db,让tx提前分发，可以减少数据的存储的量，而数据的block数据也可以放到一台主机上面去
4. 当然，这些都是可选的
```

## 关于tendermint的reactor
```
1. tendermint 通过reactor的方式交互数据，不同的reactor不同的通道
2. 我们可以利用reactor提前分发tx，可以减少tx的网络开销，甚至可以提前分发tx，而不用执行
3. 甚至可以通过去中心化的网络，把tx存储到网络当中去
```

## kv存储
基于tendermint的kv存储，每个节点有自己独有的前缀
节点的前缀，在部署节点的时候，通过master节点添加
这样的话，根据前缀进行过滤和判断，可以让用户存储自己的私有的数据

节点在添加的时候，附带上节点对应的前缀以及权限
